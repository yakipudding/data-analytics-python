---
title: '離散化'
---

ある連続した値を不連続な値に分割すること。

- 例
  - 連続した値：[0.1, 0.5, 1.1, 1.8, 3.4, ...]
  - 離散化：[0, 0, 1, 1, 3, ...]
- 一定の範囲の値を同じ値にまとめることができる
  - 同じ値：離散的な**階級**という
- 階級
  - 階級別に集計することで分布の形などを分析することができる
  - 順序データとして扱われる
  - 決められた幅がある

## 固定幅の離散化
- あらかじめ階級幅を決めて離散化すること
  - 例えばdoubleをintにするとか、年齢を10歳区切りにするとか
- 階級幅は固定値だけでなく、指数幅幅にすることもある

### 固定値幅
値/最大値*階級数の切り捨てで固定値幅の階級を割り当てる
例えば0~99までの値を10で割って切り捨てを行うと、0～9までの階級が割り当てられる
一様分布のように均等にばらついている時に使える

```py
np.floor_divide(df.列名, 10)
```

### 分位数による離散化
分布から階級を求めるやり方
あらかじめ階級幅を固定値で決めるのが難しい（最大値が大きくて読みづらい）時などに使える
一様分布のように均等にばらついている時に使える

分位数の計算

```py
df.列名.quantile([0.25, 0.5, 0.75])
```

index | 列名
--- | --- 
0.25 | 4.0
0.5 | 8.0
0.75 | 20.0

分位数に直接変換する場合はqcut

```py
pd.qcut(df.列名, 4, labels=False)
# 値が四分位数（0,1,2,3）に直接変換される
```

### 指数幅
対数変換（の切り捨て）により指数幅の階級を割り当てる。
対数分布のように裾が重い（最大値が中央値から大きく外れている）時に使える
対数変換は0だとマイナス無限大になるため、+1しておくと良い

```py
np.floor(np.log10(df.列名 + 1))
```
